리펙터링을 언제 어떤 방법을 적용해야 하는지 정리한다.

---

## 기이한 이름

함수, 모듈, 변수, 클래스 등은 그 이름만 보고도 무슨일을 하고 어떻게 사용해야 하는지 명확히 알 수 있어야 한다.

> #### 함수 선언 바꾸기

> #### 변수 이름 바꾸기

> #### 필드 이름 바꾸기

---

## 중복 코드

똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다.

> #### 함수 추출하기
>
> 완전히 동일한 코드 구조가 있을 경우 사용한다.

> #### 문장 슬라이드하기
>
> 코드가 비슷하긴 한데 완전히 똑같지 않을 경우 사용한다.

> #### 메서드 올리기
>
> 같은 부모로부터 파생된 서브클래스들에 코드가 중복되어 있을 경우 사용한다.

---

## 긴 함수

오랜 기간 잘 활용되는 프로그램들은 하나같이 짧은 함수로 구성했다.\
짧은 함수들로 구성된 코드베이스는 코드가 끝없이 위임하는 방식으로 작성이 되어있다.

이러한 간접호출의 연속인 코드베이스는 이해/공유/선택하기 쉬워진다는 장점이 있다.

긴 함수 리팩토링의 핵심은 `함수 추출하기` 이다.
함수 본문에서 따로 묶어 빼내어 새로운 함수로 만든다.

코드가 단 한줄이어도 따로 설명할 필요가 있다면 함수로 추출하는게 좋다.

함수 추출의 대상이 되는 코드덩어리는 다음 방법들로 찾을 수 있다.

> #### 주석을 참고하기
>
> 주석이 설명하는 코드와 함께 함수로 빼내고 함수 이름은 주석 내용을 토대로 짓는다.

> #### 조건문
>
> `조건문 분해하기`로 대응한 후,\
> 거대한 switch문을 구성하는 case문 마다 `함수 추출하기`로 추출한다.
>
> 같은 조건으로 나뉘는 switch 문이 여러 개라면, `조건문을 다형성으로 바꾸기`를 사용한다.

> #### 반복문
>
> 반복문도 그 안의 코드와 함께 추출해서 독립된 함수로 만든다.\
> 추출한 반복문 코드에 적합한 이름이 떠오르지 않는다면, 성격이 다른 두 작업이 섞여 있기 때문이다.
>
> 성능을 신경쓰지 말고 과감히 `반복문 쪼개기`를 적용해서 작업을 분리한다.

함수를 추출할 때 방해되는 요인으로는 임시변수와 매개변수이다.\
임시변수와 매개변수가 많다면 추출 작업에 방해가 된다.

매개변수, 임시변수를 줄일 수 있는 방법으로는 다음이 있다.

> #### 임시 변수의 수 줄이기
>
> - 임시변수를 질의함수로 바꾸기

> #### 매개 변수의 수 줄이기
>
> - 매개변수 객체 만들기
> - 객체 통째로 넘기기
> - 함수를 명령으로 바꾸기 (위의 2가지 방법으로도 해결이 안될 경우)

가 있다.

---

## 긴 매개변수 목록

함수에 필요한 것들을 모조리 매개변수로 전달해야 전역데이터가 늘어나는 사태를 막을 수 있다.\
그러나 매개변수 목록이 길어지만 그 자체로 이해하기 어려울 때가 많다.

> #### 매개변수를 질의 함수로 바꾸기
>
> 다른 매개변수에서 값을 얻어올 수 있는 매개변수가 있을 수 있는 경우 사용한다.

> #### 객체 통째로 넘기기
>
> 원본 데이터 구조를 그대로 넘김으로써 매개변수의 수를 줄인다.

> #### 매개변수 객체 만들기
>
> 항상 함께 전달되는 매개변수들을 묶어버린다.

> #### 플래그 인수 제거하기
>
> 함수의 동작 방식을 정하는 플래그 역할의 매개변수는 제거한다

> #### 여러 함수를 클래스로 묶기
>
> 클래스는 매개변수 목록을 줄이는 데 효과적인 수단이기도하다.\
> 여러개의 함수가 특정 매개변수들의 값을 공통으로 사용할 때 유용하다.

---

## 전역 데이터

우리가 겪을 수 있는 악취 중 가장 지독한 축에 속한다.

코드베이스 어디에서든 건드릴 수 있고 값을 누가 바꿨는지 찾아낼 매커니즘이 없다는게 문제다.

> #### 변수 캡슐화하기
>
> 다른 코드에서 오염시킬 가능성이 있는 데이터를 함수로 감싼다.\
> 이를 통해 데이터를 수정하는 부분을 쉽게 찾을 수 있고, 접근을 통제할 수 있다.

---

## 가변 데이터

데이터를 변경했더니 에상치 못하 ㄴ결과나 골치아픈 버그로 이어지는 경우다.
