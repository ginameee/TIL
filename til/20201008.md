## 개발 컨텐츠 배포

Vue로 개발된 컨텐츠를 기존 서비스에 붙이는 작업을 진행중이다.\
사실 컨텐츠를 export한 스크립트를 load만 하면 될 것 처럼 보이지만, 조율해야될 것들이 몇가지 있었다.\
이 과정에서 알게된 정보들을 정리한다.

#### web server - prerender 구조

다른팀에서 개발하고 관리하는 부분이기에 정확한 구조는 모르지만, 그래도 대략적인 흐름은 알게되었다.
구성요소는 크게 4가지다.

- 브라우저
- 웹서버 (called front-web)
- 프리렌더
- API 서버

1. 브라우저가 웹서버로 페이지 요청을 한다.
2. 웹서버는 페이지구성에 사용되는 api를 call한다.
3. 웹서버는 api로부터 받은 데이터와, 브라우저가 요청한 페이지정보를 프리렌더로 넘긴다.
4. 프리렌더는 웹서버로부터 전달받은 데이터와 페이지를 조합하여 압축된 형태의 html파일을 웹서버로 전달한다.
5. 웹서버가 최종적으로 브라우저에게 압축된 html파일을 응답으로 전달한다.

#### API 사용/등록

서비스에서 api를 요청할 때 쌩도메인으로 호출하는 경우는 없는 것 같다. (보안상의 이유도 있을거고, 기타 등등의 이유가 있는 것 같다.)\
따라서 프록시비슷한 기법을 사용하는데, 이를 위해선 몇가지 등록절차가 필요하다.

브라우저(=클라이언트) -------- <u style="color: grey; font-size: 7px">[redirect]</u>웹서버 ---- <u style="color: grey; font-size: 7px">[gateway]</u> ---- API서버

일단 브라우저와 웹서버사이에 리다이렉팅이 일어난다.\
그리고 웹서버와 API서버사이에 프록시 서버와 비슷한 Gateway가 존재한다.

API가 신규도메인으로 생성되었을 경우 다음과정이 필요하다.

1. Gateway에 API서버 도메인을 등록한다.
2. 클라이언트가 사용하는 endpoint에 대한 redirect정보를 웹서버에 등록한다.

---

진짜 일을 하면할수록 하나의 서비스를 만드는게 얼마나 거대하고 대단한일인지,\
다양한 팀들간의 협업이 얼마나 중요한지 깨닫게 되는 것 같다.\
문서화를 잘 하자!!
